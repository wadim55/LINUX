apt install openssh-server

чтобы подключиться вводим vadim@92.124.142.174 И ПАРОЛЬ

чтобы ЗАЙТИ ROOT НАДО СНАЧАЛА ЗАДАТЬ ПАРОЛЬ ДЛЯ root                   sudo passwd root

затем в файле /etc/ssh/sshd_config.d   раскомментировать строчку       PermitRootLogin  yes
---------------------------------------------------------------------------------------------
КОПИРУЕМ ФАЙЛ С СЕРВЕРА ИЛИ НА СЕРВЕР С ПОМОЩЬЮ SSH

scp vadim@92.124.142.174 /media

если порт SSH изменен, то 
 
scp -P 956 vadim@92.124.142.174 /media


----------------------------------------------------------------------------------------------


Port. Определяет порт, на котором демон SSH прослушивает соединения. По умолчанию SSH использует порт 22. Изменение номера порта может потенциально снизить количество вредоносных SSH-подключений.

Protocol. SSH поддерживает две версии протокола. Этот параметр рекомендуется оставить без изменений, если только не требуется поддержка клиентов, которые могут работать только с протоколом

UsePrivilegeSeparation. Опция позволяет SSH порождать дочерние процессы с необходимым уровнем привилегий. Это помогает изолировать процессы и повысить безопасность.

SyslogFacility и LogLevel. Эти опции настраивают ведение логов. Первая опция определяет код объекта для сообщений логов, а вторая — уровень логирования (количество вносимых в лог данных).

DenyGroups. Опция создаёт чёрный список групп, которые не должны входить в систему. Пользователи, принадлежащие к этим группам, не будут иметь доступа.

DenyUsers. Чёрный список пользователей. Указывает, какие пользователи не должны получать доступ к системе через SSH

Match. Позволяет более тонко контролировать, кто и при каких обстоятельствах может входить в систему. Эта опция определяет набор параметров, который используется при подключении определённого пользователя или группы

RevokedKeys. Список отозванных открытых ключей. Предотвращает использование перечисленных ключей для входа в систему

AddressFamily. Указывает, от каких адресов принимаются подключения. По умолчанию опция имеет значение «any»; для поддержки адресов IPv4 используется значение inet, а для адресов IPv6 — inet6

ListenAddress. Позволяет настроить SSH-демон для прослушивания определённого адреса и порта. По умолчанию демон будет слушать все адреса этого компьютера. 15

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
РАЗРЕШИТЬ ДОСТУП С КОНКРЕТНЫХ ХОСТОВ

редактируем файл /etc/hosts.allow   - в этом файле пишем кому можно

пишем строку SSHD: 92.124.142.174     - с этого IP можно заходить по SSH
 
редактируем файл /etc/hosts.deny

пишем строку SSHD: All     - всем запретить кроме тех кому разрешено

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Вход SSH по ключу

Генерим пару закрытый открытый ключ ssh-keygen

в папке home/user/.ssh появятся 2 файла id_rsa и id_rsa.pub

заходим в эту директорию и копируем публичный ключ на удаленный хост, которому будет разрешен вход по SSH

ssh-copy-id vadim@92.124.142.174

Чтобы запретить вход по SSH с паролем идем в /etc/ssh/sshd_config

Находим строку                PasswordAutification no
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
















 
